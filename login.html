<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/html">

<head>
    <meta charset="UTF-8">
    <link href='https://fonts.googleapis.com/css?family=IBM Plex Sans Condensed' rel='stylesheet'>
    <link href="login.css" rel="stylesheet">
    <title>Log In</title>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="scripts/LoginUser.js"></script>
    <script>
        var form;
        function initiate(){
            var button = document.getElementById("send");
            button.addEventListener("click", sendit);
            form = document.querySelector("form[name='loginData']");
            form.addEventListener("invalid", validation, true);
            form.addEventListener("input", checkval);
        }

        function validation(e){
            var elem = e.target;
            elem.style.background = '#FFDDDD';
        }

        function sendit(){
            var elem = document.getElementById("email");
            var valid = form.checkValidity();
            if(valid){
                form.submit();
            } else if(elem.validity.patternMismatch || elem.validity.valueMissing) {
                alert("El email introducido no es válido");
            }
        }

        function checkval(e){
            var elem = e.target;
            if (elem.validity.valid){
                elem.style.background = '#FFFFFF';
            }else{
                elem.style.background = '#FFDDDD';
            }
        }

        addEventListener("load", initiate);
    </script>
</head>
<body class="loginTheme">
<iframe src="header.html" style="border: none; width: 100%"></iframe>
<form class="loginContainer" name="loginData" method="post" onsubmit="checkUser()">
    <input class="loginBox" id="email" type="email" placeholder="Email" required
           pattern="(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*)@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9]))\.){3}(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9])|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])"
           oninvalid="this.setCustomValidity('La dirección de correo no es válida')"
           oninput="this.setCustomValidity('')"/>
    <input class="loginBox" name="password" id="password" type="password" placeholder="Password" required />
    <p>OR</p>
    <div class="customBtn">
        <img src="https://cdn-icons-png.flaticon.com/512/2991/2991148.png" class="icon">
        <span class="buttonText">Continuar con Google</span>
    </div>
    <input type="submit" class="loginButton" id="send" value="Log In">

    <p class="passwordForgotten">Forgot password?</p>
</form>
<iframe src="footer.html" style="border: none; width: 100%"></iframe>
</body>
</html>